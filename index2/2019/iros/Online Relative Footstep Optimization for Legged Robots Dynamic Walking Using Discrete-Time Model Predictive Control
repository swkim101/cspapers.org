We present a unified control framework that generates dynamic walking motions for biped and quadruped robots with online relative footstep optimization. The footstep optimization is formulated as a discrete-time Model Predictive Control problem which determines future footstep locations. The framework has a hierarchical structure consisting of three layers: footstep planner, trajectory generator and whole-body controller. The footstep planner plans next footstep position based on Linear Inverted Pendulum (LIP) model. Relative footstep optimization is proposed to enable automatic footstep planning without the use of any predefined footstep sequences. The trajectory generator will generate CoM and feet trajectory given the next footstep placement. In order to generalize to quadruped robots, “virtual leg” concept has been used to coordinate leg pair movement. The whole-body inverse dynamic controller calculates joint torques to track given Cartesian reference trajectories. To include under-actuation into consideration, contact vertices formulation of ground reaction forces (GRFs) has been adopted. Generalized whole-body controller can handle biped robot with line feet as well as quadruped robots with point feet walking with dynamic gaits. Several simulations have been performed to demonstrate the robustness and generality of the proposed framework.