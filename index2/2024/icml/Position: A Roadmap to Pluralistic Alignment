The CMS muon system has been aligned using cosmic-ray muons collected in 2008 and beam-halo muons from the 2008 LHC circulating beam tests. After alignment, the resolution of the most sensitive coordinate is 80 microns for the relative positions of superlayers in the same barrel chamber and 270 microns for the relative positions of endcap chambers in the same ring structure. The resolution on the position of the central barrel chambers relative to the tracker is comprised between two extreme estimates, 200 and 700 microns, provided by two complementary studies. With minor modifications, the alignment procedures can be applied using muons from LHC collisions, leading to additional significant improvements.