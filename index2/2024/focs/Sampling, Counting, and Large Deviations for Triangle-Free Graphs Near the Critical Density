We study the following combinatorial counting and sampling problems: can we sample from the Erdős-Rényi random graph $G(n,p)$ conditioned on triangle-freeness? Can we approximate (either algorithmically or with a formula) the probability that $G(n,p)$ is triangle-free? These are prototypical instances of forbidden substructure problems ubiquitous in combinatorics. The algorithmic questions are instances of approximate sampling and counting for a hypergraph hard-core model. Estimating the probability that $G(n,p)$ has no triangles is a fundamental question in probabilistic combinatorics and one that has led to the development of many important tools in the field. Through the work of several authors, the asymnpotics of the logarithm of this probability are known if $p=o(n^{-1/2})$ or if $p=\omega(n^{-1/2})$. The regime $p=\Theta(n^{-1/2})$ is more mysterious, as this range witnesses a dramatic change in the the typical structural properties of $G(n,p)$ conditioned on triangle-freeness. As we show, this change in structure has a profound impact on the performance of sampling algorithms. We give two different efficient sampling algorithms for this problem (and complementary approximate counting algorithms), one that is efficient when $p < c/\sqrt{n}$ and one that is efficient when $p > C/\sqrt{n}$ for constants $c, C > 0$. The latter algorithm involves a new approach for dealing with large defects in the setting of sampling from low-temperature spin models. Our algorithmic results can be used to give an asymptotic formula for the logarithm of the probability $G(n,p)$ is triangle-free when $p < c/\sqrt{n}$. This algorithmic approach to large deviation problems in random graphs is very different than the known approaches in the suBCRitical regime $p=o(n^{-1/2})$ (based on the Poisson paradigm) and in the supercritical regime $p=\omega(n^{-1/2})$ (based on regularity lemmas or hypergraph containers); in fact, to the best of our knowledge, no asymptotic formula for the log probability in the regime $p=\Theta(n^{-1/2})$ was even conjectured previously.