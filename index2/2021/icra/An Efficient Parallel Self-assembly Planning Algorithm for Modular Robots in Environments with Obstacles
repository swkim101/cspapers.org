Self-assembly has attracted growing interests in modular robotics during past decades. Recent work accelerates the assembly process by parallelizing the docking actions among robots. However, these methods can only apply to ideal environments without obstacles. Otherwise, robots will get trapped during the assembly process, due to the complex scenes with obstacles. This paper presents an efficient parallel assembly planning algorithm for modular robots by taking the surrounding obstacles into consideration. By this algorithm, the docking actions are able to avoid immovable obstacles, and therefore parallel self-assembly of robots can adapt to complex environments. To validate the efficacy and generality, the authors have implemented this algorithm in a grid-world simulation environment with 25 distinct maps. The simulation results show a much higher success rate (more than 80%) of our proposed algorithm compared with the existing parallel self-assembly planning algorithms. Finally, the feasibility of the algorithm is affirmed by a self-assembly experiment on the automated guided vehicles (AGVs).