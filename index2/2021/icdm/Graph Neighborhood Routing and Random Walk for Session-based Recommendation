Session-based recommendation (SBR) is to predict the next item for an anonymous item sequence. Although many neural models have proven effectiveness in the SBR task, how to learn better items’ embeddings for neural models still remains a key challenge due to the anonymity of sessions and sparsity of users’ behaviors. This paper proposes a graph-based neural model, called Graph N eighborhood Routing and Random Walk (GNRRW), which learns two kinds of item embeddings for the SBR task. We first construct an item graph based on items’ co-occurrences in all sessions, on which we learn a local embedding and a global embedding for each item. For local embedding learning, we propose a novel neighborhood routing (NR) algorithm to exploit the compositive relations between an item and its neighbors. The NR algorithm has an excellent feature in that no additional parameters are needed in the training process. For global embedding learning, we propose a random walk-based approach to explore a kind of global relations between an item and representative items. Furthermore, we propose a switch-based shared gated recurrent unit (GRU) network to alternatively learn session local representation to make a local prediction, and learn session global representation to make a global prediction. Finally, we design a decision fusion mechanism to adaptively fuse both local and global predictions to output final items’ preference scores. Experiments on the public Yoochoose and Diginetica dataset validate the superiority of our GNRRW model over the state-of-the-art neural models.