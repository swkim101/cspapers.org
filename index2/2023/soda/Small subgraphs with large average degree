<jats:p>In this paper we study the fundamental problem of finding small dense subgraphs in a given graph. For a real number <jats:inline-formula><jats:alternatives><jats:tex-math>$$s>2$$</jats:tex-math><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                <mml:mrow>
                  <mml:mi>s</mml:mi>
                  <mml:mo>></mml:mo>
                  <mml:mn>2</mml:mn>
                </mml:mrow>
              </mml:math></jats:alternatives></jats:inline-formula>, we prove that every graph on <jats:italic>n</jats:italic> vertices with average degree <jats:inline-formula><jats:alternatives><jats:tex-math>$$d\ge s$$</jats:tex-math><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                <mml:mrow>
                  <mml:mi>d</mml:mi>
                  <mml:mo>≥</mml:mo>
                  <mml:mi>s</mml:mi>
                </mml:mrow>
              </mml:math></jats:alternatives></jats:inline-formula> contains a subgraph of average degree at least <jats:italic>s</jats:italic> on at most <jats:inline-formula><jats:alternatives><jats:tex-math>$$nd^{-\frac{s}{s-2}}(\log d)^{O_s(1)}$$</jats:tex-math><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                <mml:mrow>
                  <mml:mi>n</mml:mi>
                  <mml:msup>
                    <mml:mi>d</mml:mi>
                    <mml:mrow>
                      <mml:mo>-</mml:mo>
                      <mml:mfrac>
                        <mml:mi>s</mml:mi>
                        <mml:mrow>
                          <mml:mi>s</mml:mi>
                          <mml:mo>-</mml:mo>
                          <mml:mn>2</mml:mn>
                        </mml:mrow>
                      </mml:mfrac>
                    </mml:mrow>
                  </mml:msup>
                  <mml:msup>
                    <mml:mrow>
                      <mml:mo>(</mml:mo>
                      <mml:mo>log</mml:mo>
                      <mml:mi>d</mml:mi>
                      <mml:mo>)</mml:mo>
                    </mml:mrow>
                    <mml:mrow>
                      <mml:msub>
                        <mml:mi>O</mml:mi>
                        <mml:mi>s</mml:mi>
                      </mml:msub>
                      <mml:mrow>
                        <mml:mo>(</mml:mo>
                        <mml:mn>1</mml:mn>
                        <mml:mo>)</mml:mo>
                      </mml:mrow>
                    </mml:mrow>
                  </mml:msup>
                </mml:mrow>
              </mml:math></jats:alternatives></jats:inline-formula> vertices. This is optimal up to the polylogarithmic factor, and resolves a conjecture of Feige and Wagner. In addition, we show that every graph with <jats:italic>n</jats:italic> vertices and average degree at least <jats:inline-formula><jats:alternatives><jats:tex-math>$$n^{1-\frac{2}{s}+\varepsilon }$$</jats:tex-math><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                <mml:msup>
                  <mml:mi>n</mml:mi>
                  <mml:mrow>
                    <mml:mn>1</mml:mn>
                    <mml:mo>-</mml:mo>
                    <mml:mfrac>
                      <mml:mn>2</mml:mn>
                      <mml:mi>s</mml:mi>
                    </mml:mfrac>
                    <mml:mo>+</mml:mo>
                    <mml:mi>ε</mml:mi>
                  </mml:mrow>
                </mml:msup>
              </mml:math></jats:alternatives></jats:inline-formula> contains a subgraph of average degree at least <jats:italic>s</jats:italic> on <jats:inline-formula><jats:alternatives><jats:tex-math>$$O_{\varepsilon ,s}(1)$$</jats:tex-math><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                <mml:mrow>
                  <mml:msub>
                    <mml:mi>O</mml:mi>
                    <mml:mrow>
                      <mml:mi>ε</mml:mi>
                      <mml:mo>,</mml:mo>
                      <mml:mi>s</mml:mi>
                    </mml:mrow>
                  </mml:msub>
                  <mml:mrow>
                    <mml:mo>(</mml:mo>
                    <mml:mn>1</mml:mn>
                    <mml:mo>)</mml:mo>
                  </mml:mrow>
                </mml:mrow>
              </mml:math></jats:alternatives></jats:inline-formula> vertices, which is also optimal up to the constant hidden in the <jats:italic>O</jats:italic>(.) notation, and resolves a conjecture of Verstraëte.</jats:p>