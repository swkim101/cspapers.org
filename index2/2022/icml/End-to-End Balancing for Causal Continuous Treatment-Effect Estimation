We study the problem of observational causal inference with continuous treatments in the frame-work of inverse propensity-score weighting. To obtain stable weights, we design a new algorithm based on entropy balancing that learns weights to directly maximize causal inference accuracy using end-to-end optimization. In the process of optimization, these weights are automatically tuned to the speciÔ¨Åc dataset and causal inference algorithm being used. We provide a theoretical analysis demonstrating consistency of our approach. Using synthetic and real-world data, we show that our algorithm estimates causal effect more accu-rately than baseline entropy balancing. in the synthetic data generation process. In the experiments on real-world data, we qualitatively evaluate the average treatment effect function learned by E2B. We also qualitatively analyze the patterns in E2B weights.