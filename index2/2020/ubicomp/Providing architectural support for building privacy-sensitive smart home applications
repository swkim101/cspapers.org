In this thesis, we plan to introduce a new IoT app development framework named Peekaboo, which aims to make it much easier for developers to get the granularity of data they actually need rather than always requesting raw data, while also offering architecture support for building privacy features across all the apps. Peekaboo's architectural design philosophy is to factor out repetitive data pre-processing tasks (e.g., face detection, frequency spectrum extraction) from the cloud side onto a user-controlled hub, and support them as a fixed set of open source, reusable, and chainable operators. These operators pre-process raw data to remove unneeded sensitive user information before the data flow to the cloud (and out of the users' control), thus reducing data egress and many potential privacy risks for users. Further, all the IoT apps built with Peekaboo share a common structure of the chainable operators, making it possible to build consistent privacy features beyond individual apps.