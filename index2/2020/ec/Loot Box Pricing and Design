In the online video game industry, a significant portion of the revenue is generated from microtransactions, where a small amount of real-world currency is exchanged for virtual items to be used in the game. One popular way to conduct microtransactions is via a loot box, which is a random bundle of virtual items whose contents are not revealed until after purchase. In this work, we consider how to optimally price and design loot boxes from the perspective of a revenue-maximizing video game company, and analyze customer surplus under such selling strategies. Our paper provides the first formal treatment of loot boxes, with the aim to provide customers, companies, and regulatory bodies with insights into this popular selling strategy. We consider two types of loot boxes: a traditional one where customers can receive (unwanted) duplicates, and a unique one where customers are guaranteed to never receive duplicates. We show that as the number of virtual items grows large, the unique box strategy is asymptotically optimal, while the traditional box strategy only garners 36.7% of the optimal revenue. On the other hand, unique box strategies leaves almost zero customer surplus, while traditional box strategies leaves positive surplus. Further, when designing traditional and unique loot boxes, we show it is asymptotically optimal to allocate the items uniformly, even when the item valuation distributions are highly heterogeneous. We also show that when the seller purposely misrepresents the allocation probabilities, then their revenue may increase significantly and thus strict regulation is needed. Finally, we show that even if the seller allows customers to salvage unwanted items, then the customer surplus can only increase by at most 1.4%.