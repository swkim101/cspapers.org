With the growing popularity and pervasive adoption of smart home Internet of Things (IoT) platforms, IoT security and privacy issues are gaining more attention. In this work, we reveal a new vulnerability inherent in most smart home IoT automation platforms and systems but previously unnoticed by the security community: the hidden attributes , i.e., attributes that are configurable by knowl-edgeable attackers through IoT APIs to effectively change device behaviors, but these attributes are not manageable or observable by users. An IoT device with compromised hidden attributes may behave differently from user expectations and cause severe security and safety consequences (e.g., burglary or fire). We present the root causes of the vulnerability and develop an approach to systematically discover hidden attributes. We evaluate a total of 31 commodity IoT devices of various types from 16 manufacturers and identify hidden attributes in all of them. Furthermore, we select several IoT devices with security and safety-critical hidden attributes and demonstrate the end-to-end hidden attribute attack on two popular IoT platforms: Samsung SmartThings and Amazon Alexa. In addition, we develop a tool that can automatically patch edge drivers and fix the hidden attribute issue. The source code of the auto-patching tool can be found at Anonymous GitHub.