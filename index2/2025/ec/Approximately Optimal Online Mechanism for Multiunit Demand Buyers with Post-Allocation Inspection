We consider a mechanism design problem where an auctioneer allocates k units of an item to multiunit demand buyers arriving in an online fashion, each with a constant private marginal value. The auctioneer can inspect buyers allocated to learn their types and use this information to lower payments to reward truthful buyers. By using tools from the Calculus of Variations, we fully characterize the optimal mechanism for a single-buyer problem subject to an upper bound on the allocation expectation. In particular, we characterize the optimal allocation strategy as the solution of an ordinary differential equation and establish that it is a continuous and monotonically increasing function of the buyer's types. With the solution to the single-buyer problem, and by using connections to the prophet inequality literature, we design an online mechanism that achieves [EQUATION] of the optimal (offline) revenue, where Î±max denotes the highest fraction of all units a buyer requests.1