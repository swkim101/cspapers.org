Task scheduling in cloud computing is a challenging but crucial task for ensuring service quality and load balance. Mainstream scheduling algorithms, such as heuristic algorithms and reinforcement learning, have made progress in this area. However, online task scheduling algorithms, such as reinforcement learning, can pose computational challenges in scenarios with limited computational power and heterogeneous resources. Heuristic algorithms, which are more suitable for offline scheduling where the types and quantities of tasks are known in advance, also require substantial computational resources for online scheduling. In this work, we propose the end-edge-cloud (EEC) heterogeneous resources scheduling method (EHRSM) based on a recurrent neural network (RNN) model and particle swarm optimization (PSO). EHRSM uses an RNN model trained on a dataset generated by dynamic programming to recognize and cache online tasks, efficiently transforming online task scheduling into offline scheduling. Additionally, a PSO algorithm with Cantor expansion (CE) for coding optimization is used to complete the offline scheduling. Experimental results show that the method is effective in converting online scheduling to offline scheduling, reducing the average task completion time and waiting time. Compared with existing online scheduling methods, EHRSM reduces task completion time by up to 48.24%.