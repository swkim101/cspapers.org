Allegories were introduced by Freyd and Scedrov; they form a fragment of Tarski's calculus of relations. We show that their equational theory is decidable by characterising it in terms of a specific class of graph homomorphisms. We actually do so for an extension of allegories which we prove to be conservative: allegories with top. This makes it possible to exploit a correspondence between terms and K4-free graphs, for which isomorphisms were known to be finitely axiomatisable.