Convolutional neural networks (CNNs) has achieved great success in image processing and computer vision, especially in high level vision applications, such as classification and image compression. In this paper, CNN based optimizations have been proposed to improve the performance of an open source image coder, and the coding gain mainly comes from three modules: firstly, a classification CNN is employed to generate a region of interest (ROI) map, highlighting the part of the image containing more visual information that might be more sensitive to coding loss than other part, and thus guiding the bit allocation; secondly, a remedy CNN is introduced on the reconstructioned YUV image, to learn and compensate for the coding loss; thirdly, adaptive loop filter(ALF alorithm is applied to carry out color space conversion, and to minimize the color information loss during conversion. The improvement of the proposed optimizations, both objectively and subjectively, has been demonstrated on the CLIC validation data set.