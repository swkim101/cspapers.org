Various targets keep coming up on social media, and most of them lack labeled data. In this paper, we focus on zero-shot and few-shot stance detection, which aims to identify stances with few or even no training instances. In order to solve the lack of labeled data and implicit stance expression, we propose a self-supervised data augment approach based on coreference resolution. The method is specific for stance detection to generate more stable data and reduce the variance within and between classes to achieve a balance between validity and robustness. Considering the diversity of comments, we propose a novel multi-task stance detection framework of target-related fragment extraction and stance detection, which can enhance attention on target-related fragments and reduce the noise of other fragments. Experiments show that the proposed approach achieves state-of-the-art performance in zero-shot and few-shot stance detection.