General anomaly detection techniques have always received a lot of attention. Current detection methods usually focus solely on representation learning or anomaly judgment. This paper proposes a Multi-Subspace Deviation Network (MSDN) framework to build a model combining feature learning with anomaly score learning under the condition that a small number of labeled anomalies can be observed. Concretely, our framework combines a feature learner with two specific projectors: a self-supervised projector and an anomaly score learner. We utilize random affine transformations to map the raw data to multiple subspaces and train a classifier to predict the transformation label in the self-supervised module. Anomaly scores are then obtained directly from a deviation network, where the contrastive loss is used to amplify the gap in the anomaly scores between normal objects and anomalies. Extensive experiments on eight datasets show that our proposed method achieves higher detection accuracy than previous schemes with fewer observed anomalies.