A popular approach to reduce the size of a massive dataset is to apply efﬁcient online sampling to the stream of data as it is read or generated. Online sampling routines are currently restricted to variations of reservoir sampling, where each sample is selected uniformly and independently of other samples. This renders them unsuitable for large-scale applications in computational biology, such as metagenomic community proﬁling and protein function annotation, which suffer from severe class imbalance. To maintain a representative and diverse sample, we must identify and preferentially select data that are likely to belong to rare classes. We argue that existing schemes for diversity sampling have prohibitive overhead for large-scale problems and high-throughput streams. We propose an efﬁcient sampling routine that uses an online representation of the data distribution as a preﬁlter to retain elements from rare groups. We apply this method to several genomic data analysis tasks and demonstrate signiﬁcant speedup in downstream analysis without sacriﬁcing the quality of the results. Because our algorithm is 2x faster and uses 1000x less memory than coreset, reservoir and sketch-based alternatives, we anticipate that it will become a useful preprocessing step for applications with large-scale streaming data. Whole-genome shotgun sequencing (WGS) has inspired nu-*