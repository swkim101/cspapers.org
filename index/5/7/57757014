We are witnessing a rapid growth of electrified vehicles because of the ever-increasing concerns over urban air quality and energy security. Compared with other electric vehicles, electric buses have not yet been prevailingly adopted worldwide due to the high owning and operating costs, long charging time, and the uneven distribution of charging facilities. Moreover, the highly dynamic environment factors such as the unpredictable traffic congestions, different passenger demands, and even changing weather, can significantly affect electric bus charging efficiency and potentially hinder further development of large-scale electric bus fleets. To deal with these issues, in this paper, we first analyze a real-world dataset including massive data from 16,359 electric buses, 1,400 bus lines and 5,562 bus stops, which is obtained from the Chinese city Shenzhen, who has the first and the largest full electric bus network for public transit. Then we investigate the electric bus network to understand its operating and charging patterns, and further verify the feasibility and necessity of a real-time charging scheduling. With such understanding, we design bCharge, a real-time charging scheduling system based on Markov Decision Process to reduce the overall charging and operating costs for city-scale electric bus fleets, taking the time-variant electricity pricing into account. To show the effectiveness of bCharge, we implement it with the real-world streaming dataset from Shenzhen, which includes GPS data of the electric bus fleet, the bus lines and stops data, coupled with the 376 electric bus charging stations data. The evaluation results show that bCharge can dramatically reduce the charging cost by 23.7% and 12.8% electricity usage simultaneously.