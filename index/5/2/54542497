We propose a knowledge-based approach of refining web application systems from upper-stream models to program-models. The uppermost specifications and upper-stream models have significant effects on the program models from which we can derive source programs in text format. For deriving program models, analysis of upper-stream models and design integration of information obtained from the analysis are required, as program models and the structure of them often include those parts which are not included explicitly in the upper-stream model. We discuss specifications, models, knowledge, and refinement process on each of domains: user interaction, communication subsystem and database.