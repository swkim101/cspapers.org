This paper proposes a method of behavior generation for humanoids in which a robot learns sensorimotor maps in each motion module as the forward and inverse relationships between optic flows in the robot's view and motion parameters. Humanoids use these maps to determine appropriate motion parameters that generate a desired flow given by a planner. Each module consists of a planner and sensorimotor maps of primitives and can accomplish a simple task. Using a predefined module transition rule, humanoids can accomplish a complex task. Passing a ball (face-to-face pass) between two humanoids which have different camera lens and body parameters is realized as an example task.