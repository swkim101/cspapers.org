Software Defined Data Center (SDDC) is now an emerging area drawing considerable attention in enterprise computing. Software-Defined Storage (SDS), as a key element to enable the SDDC concept, is considered one of the most disruptive storage technologies in modern times. SDS introduces a variety of novel features and functionalities thereby changing the traditional view of the storage stack. In VMware's ESXi virtualization platform, several sparse virtual disk formats have been implemented to support critical features for SDS such as virtual machine (VM) snapshots, Fault-Tolerance (FT), thin provisioning and linked clones. Each virtual disk format supports unique features that may incur complex interactions with other layers of the storage stack such as guest file systems and storage devices.
 In this paper, we focus on investigating the cross-layer behaviors when applying several key features of modern file systems on sparse virtual disks. Through our experiments, we observe as much as 7x performance degradation for sparse virtual disks if certain file system feature is used improperly. However, we discover that 1) choosing the right set of guest file system features and 2) adopting optimization schemes in virtual disk layer can significantly improve the performance of sparse virtual disks. Based on our observations, we derive valuable insights to assist with the design-decisions made by data-center administrators, file system developers and storage architects.