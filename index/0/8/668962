Email spam is one of the most critical problems facing social networks and the Internet today. Current anti-spam solutions have common weaknesses of low accuracy and high false positive rates. In this paper, we present an anti-spam mechanism based on social reputation, to successfully block spam collaboration between network participants. Using interconnection relationships within a social network we construct a topology and convert the mail transmission problem into a routing problem based on a trust-updating mechanism with respect to users' feedback. In addition to simulations, we have also implemented our method on the Facebook social network Through this study, we can effectively detect and filter spam E-mail messages, while promoting the development of social network applications.