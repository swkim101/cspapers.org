In this paper, we consider a robot with nonlinear springs located at each joints and acting in parallel with the actuators. We propose a method to simultaneously design the trajectory of the robot and the force/torque profiles of the springs for an optimal compensation of the gravity and inertial forces. First, we express the trajectory and force/torque profiles of the springs as a Hermite interpolation of a finite number of nodes, then we derive a closed-form solution of the optimal spring design as a function of the trajectory. As a consequence, the initial optimization problem is reduced to a trajectory optimization problem, solved with a numeric algorithm. We show an example of optimal design for a 3-Degree Of Freedom (DOF) serial manipulator. Finally, we show that the nonlinear springs calculated for this manipulator can be technically realized by a non-circular cable spool mechanism.