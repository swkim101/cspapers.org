Since a biped humanoid inherently suffers from instability and always risks to tipping over, stable and reliable biped walking is the most important goal. The simulator is a significant tool to pursue this goal. In this paper, we first present a method for constructing a humanoid simulator that can closely model and predict the motion of an actual humanoid. We then propose a balance controller consisting of an off-line walk-pattern generator and a real-time modification. Using the simulator, we can predict the humanoid's physical capability subject to the constraints of actuators, and clarify the required specifications of actuators to execute a desired task. The functions of the developed simulator and the effectiveness of the proposed balance controller were evaluated through simulated walks on an unknown rough terrain, soft ground, and an environment in the presence of disturbances.