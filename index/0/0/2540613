Unmanned planetary landers to date have landed "blind", without the benefit of onboard landing hazard detection and avoidance systems. This constrains landing sites to very benign terrain and limits the scientific goals of missions. We review sensor options for landing hazard detection, then identify an approach based on stereo vision and shadow analysis that appears to address the broadest set of missions with the lowest cost. We describe algorithms for slope estimation and rock detection with this approach, develop models of their performance, and validate those models experimentally. Instantiating our model of rock detection reliability for Mars predicts that this approach would reduce the probability of failed landing by at least a factor of 4 compared to blind landing. Conversely, for the safety level desired for the 2009 Mars lander, this approach would increase the fraction of the planet that is accessible for landing from about 1/3 to nearly 100%.