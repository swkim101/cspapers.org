We consider the problem faced by a procurement agency that runs an auction-type mechanism to construct an assortment of products with posted prices, from a set of differentiated products offered by strategic suppliers. Heterogeneous consumers then buy their most preferred alternative from the assortment as needed. Framework agreements (FAs), widely used in the public sector, take this form; the central government runs the initial auction and then the public organizations (hospitals, schools, etc.) buy from the selected assortment. This type of mechanism is also relevant in other contexts, such as the design of medical formularies and group buying. When evaluating the bids, the procurement agency must consider the optimal trade-off between offering a richer assortment of products for consumers versus offering less variety, hoping to engage the suppliers in a more aggressive price competition. We develop a mechanism design approach to study this problem and provide a characterization of the optimal assortments and prices. The optimal mechanism balances the trade-off between product variety and price competition, in terms of suppliers' costs, products' characteristics, and consumers' characteristics. Relative to the traditional mechanism design problem, a distinctive feature of our formulation is that the auctioneer cannot directly decide how to allocate demand across products. Instead, the auctioneer selects the assortment and prices, and demands are then determined by the underlying preferences of consumers. Our work advances the theory of auctions and mechanism design by accounting for an endogenous demand system for differentiated products. We then use the optimal mechanism as a benchmark to evaluate the performance of the Chilean government procurement agency's current implementation of FAs, used to acquire US\$2 billion worth of goods per year. We show how simple modifications to the current mechanism, which increase price competition among close substitutes, can considerably improve performance.