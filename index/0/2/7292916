We introduce a method for fast and accurate registration of multiple horizontal laser scans obtained by a mobile robot. The method is based on novel representation of the scene geometry called a latent map, which consists of a set of piecewise linear functions defined over a spatial grid covering the scene. The latent map representation is designed to handle the noise, outliers and limited spatial resolution of laser scan data in a principled manner. The main idea of our algorithm is to iterate between optimizing the latent map, and optimizing the alignment between the latent map and the input scans. In order to handle large datasets containing tens of thousands of scans, we introduce a multi-resolution pose estimation procedure, which applies our scan alignment algorithm at multiple resolutions and combines the results. We demonstrate our novel scan matching technique on several challenging data sets, where we obtain state of the art pose and map reconstructions that are markedly superior to what pairwise scan matching methods can achieve.