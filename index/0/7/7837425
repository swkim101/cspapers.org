Constrained trajectories for a formation of N aircraft are optimized in terms of kinetic energy, fuel and energy consumption. Each aircraft moves from an initial position, converges to an assigned waypoint, unique for the formation, passes through m assigned waypoints, avoids a designated area and finally passes through a given surface. Airplanes are modeled as 3DOF point masses that always maintain a minimum distance between them. Most of the solutions are in closed form and their optimality is guaranteed by necessary and sufficient conditions.