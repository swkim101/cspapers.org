We present a new general framework for online probabilistic plan recognition called the Abstract Hidden Markov Memory Model (AHMEM). The new model is an extension of the existing Abstract Hidden Markov Model to allow the policy to have internal memory which can be updated in a Markov fashion. We show that the A H M E M can repreÂ­ sent a richer class of probabilistic plans, and at the same time derive an efficient algorithm for plan recognition in the A H M E M based on the RaoBlackwellised Particle Filter approximate inference method.