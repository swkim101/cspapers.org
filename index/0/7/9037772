This paper describes a model-based diagnostic system architecture which has test generation capability and which learns from experience. It acquires experiential knowledge from single experiences in the form of compact symptom-failure association rules and component failure records. With this capability, when it has had a similar experience in the past, it can diagnose the failure faster and more efficiently by suggesting better tests. Even if it has not had any similar experience in the past, it can diagnose the failure using its knowledge about the structure and behavior of the target system. Therefore, this architecture gives a solution to both the knowledge acquisition bottleneck problem of heuristic rule based systems and the efficiency problem of model-based systems. Experimental results show this technique to be practical and promising. It has been implemented in PROLOG in a concise form.