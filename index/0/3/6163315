Self localization of mobile robots is necessary when they accomplish autonomous tasks in a given environment. In this paper, we propose a method for self localization of mobile robots equipped with an omnidirectional camera. The proposed method is composed of two phases. The first phase is for global localization. The robot estimates its position and orientation by matching an acquired omnidirectional image to arbitrary viewpoint images generated from a 3D environment model. The second phase is for local localization. Position and orientation are estimated by matching 2D edge points to 3D measurement data of lines. Experimental results showed the effectiveness of the proposed method.