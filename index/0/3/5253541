This paper proposes a model-driven development (MDD) framework to manage the complexity of application development for wireless sensor networks (WSNs). The proposed framework consists of a Unified Modeling Language (UML) profile for WSN applications and a UML virtual machine, called Matilda. The proposed UML profile abstracts the low-level details of WSNs and provides higher abstractions for application developers to graphically design and maintain their applications. Matilda is a runtime engine used to design, validate, deploy and execute WSN applications consistently at the modeling layer. This paper describes the design and implementation of the proposed MDD framework, and presents how the framework is used in WSN application development. Empirical evaluation results show that the proposed MDD framework can build efficient WSN applications.