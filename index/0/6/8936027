The market design literature has successfully designed mechanisms that achieve desirable properties such as strategy-proofness (incentive compatibility) and efficiency at the allocation stage. However, agents must often make investment decisions before participating in allocation mechanisms. These decisions are endogenous, in the sense that market participants' investments depend on the choice of mechanism. The goal of this paper is to understand when it is possible to design fully efficient mechanisms, i.e., mechanisms that both are efficient ex post and induce agents to make efficient investment decisions ex ante. To do so, we consider a general public choice setting (with transfers). Our framework includes, but is not limited to, object allocation settings such as auctions as well as two-sided matching environments such as residency matching. In our setting, payoffs depend not only on the outcome selected by the mechanism but also on agents' pre-mechanism investment choices. We say that a mechanism induces efficient investment by an agent if the investment choices that maximize the utility of that agent coincide with the investment choices that maximize social welfare. Our first main result shows that a mechanism induces efficient investment if and only if it provides marginal rewards, in the sense that the change in an agent's utility when that agent adjusts her investment is equal to the associated change in social welfare. For our second main result, we focus on ex post efficient mechanisms, i.e., mechanisms that select welfare-maximizing outcomes given agents' investment decisions. We show that for ex post efficient mechanisms, inducing efficient investment and providing marginal rewards are both equivalent to strategy-proofness. We extend our equivalence results to approximate versions of the aforementioned properties. Our results imply that under the Kelso--Crawford (1982) worker-optimal stable mechanism (with discrete transfers), workers are incentivized to make approximately efficient human capital investments before entering the labor market (conditional on the actions of firms).