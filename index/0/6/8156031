This paper presents a wearable Inertial Measurement Unit pedestrian positioning system for indoors. Hidden Markov Model (HMM) is introduced to pre-process the sensor data and classify common activities. HMM also complements local minimum angular rate value for capturing the onset/end of each step. ZUPT algorithm are implemented to correct the walking velocity at step stance phase when errors existed. A novel acceleration-based approach combined with gyroscope data is developed to achieve a better heading estimation. Proposed method is able to reduce drift errors from gyroscopes and avoid electromagnetic perturbance to magnetometers when estimate subject's position. Experiment results show the positioning system achieves approximately 99% accuracy.