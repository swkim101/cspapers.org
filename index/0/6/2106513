Considering that freeway mainline has not only high speed but also the ability to store large amount of vehicles, this research proposed a new approach for controlling both freeway on-ramp and mainline. Based on local ramp metering strategy ALINEA, this approach controls both on-ramp vehicles and mainline shoulder lane vehicles according to real-time traffic condition of the ramp and mainline so that to make good use of vehicle store capacity of mainline and at the same time reduce freeway travel time and ramp queue. Using simulation and comparison, the feasibility and effectiveness of this approach was proved.