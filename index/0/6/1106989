We address the problem of pattern generation in obstacle-filled environments by a swarm of mobile robots. Decentralized controllers are devised by using the Smoothed Particle Hydrodynamics (SPH) method. The swarm is modelled as an incompressible fluid subjected to external forces. Actual robot issues such as finite size and nonholonomic constraints are also addressed. Collision avoidance guarantees are discussed. Finally, in the absence of obstacles, we prove for the first time stability and convergence of controllers based on the SPH.