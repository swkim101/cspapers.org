Batteryless, energy-harvesting sensing systems are critical to the Internet-of-Things (IoT) vision and sustainable, long-lived, untethered systems. Unfortunately, developing new batteryless applications is challenging. Energy resources are scarce and highly variable, power failures are frequent, and successful applications typically require custom hardware and special expertise. In this paper, we present Flicker, a platform for quickly prototyping batteryless embedded sensors. Flicker is an extensible, modular, "plug and play" architecture that supports RFID, solar, and kinetic energy harvesting; passive and active wireless communication; and a wide range of sensors through common peripheral and harvester interconnects. Flicker supports recent advances in failure-tolerant timekeeping, testing, and debugging, while providing dynamic federated energy storage where peripheral priorities and user tasks can be adjusted without hardware changes. Flicker's software tools automatically detect new hardware configurations, and simplify software changes. We have evaluated the overhead and performance of our Flicker prototype and conducted a case study. We also evaluated the usability of Flicker in a user study with 19 participants, and found it had above average or excellent usability according to the well known System Usability Survey.