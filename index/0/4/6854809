This paper addresses the closed-loop control of an actuator with both a continuous input variable (motor torque) and a discrete input variable (mode selection). In many applications, robots have to bear large loads while moving slowly and also have to move quickly through the air with almost no load, leading to conflicting requirements for their actuators. An actuator with multiple gear ratios, like in a powertrain, can address this issue by allowing an effective use of power over a wide range of output speed. However, having discrete modes of operation adds complexity to the high-level control and planning. Here a controller for two-speed actuators that automatically select both the best gear ratio and the motor torque is developed. The approach is to: first derive a low-dimensional model, then use dynamic programming to find the best actions for all possible situations, and last use regression analysis to extract simplified global feedback laws. This approach produces simple practical nearly-optimal feedback laws. A controller that globally minimizes a quadratic cost function is derived for a two-speed actuator prototype, global stability is proven and performance is demonstrated experimentally.