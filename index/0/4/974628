Research on diagnosis has a long history in artificial intelligence which includes work dealing with diagnosis and repair of autonomous systems like space probes and software debugging. In this paper we extend previous work by introducing modeling principles for software architectures that allow to detect and locate failures of the robotâ€™s control software. Failure detection is based on observers, i.e., software that monitors the behavior of the control software. Localization is based on a model of the architecture and uses model-based diagnosis for computing the failure causes. Moreover, we introduce an algorithm for repairing the software and discuss first experimental results of our implementation.