In this paper, we propose architecture to simulate wafer probe. We use a modeling tool named CTPN (colored-timed Petri nets) to model all testing flow. With CTPN model, we can predict the delivery date of any specific product under some scheduling policies efficiently and precisely. In the scheduling phase, we combine two popular methods to contract high-quality schedules. One is to select machines for lots and the other is to select lots for machines. In each method, we use the GA-based approach to search for the optimal combination of a number of heuristic rules. This CTPN-based GA scheduler and helps us to find the good solution so as to meet the requirements in the complicated environment.