A stochastic model of a transaction oriented computer system in the presence of intermittent failures, operating with a checkpoint and roll-back recovery scheme, is proposed in the case of a hierarchy of checkpoints and failures. An analysis provides the stationary probability distribution for the model and the optimum checkpoint intervals for two cases of interest: when a fixed checkpoint is used for each failure and when the allowable checkpoint closest in time is used.