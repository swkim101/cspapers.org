We propose a novel approach for estimating the nonlinear stiffness of robot joints with flexible transmissions. Based on the definition of dynamic residual signals, we derive stiffness estimation methods that use only position and velocity measurements on the motor side and needs only the knowledge of the dynamic parameters of the motors. In particular, no extra force/torque sensing is needed. Two different strategies are considered, a model-based stiffness estimator and a black-box stiffness estimator. Both strategies consist of two stages. The first stage of the model-based estimator generates a residual signal that is a first-order filtered version of the flexibility torque of the transmission, while in the second stage a least squares fitting method is used to estimate the model parameters of the stiffness. The black-box estimator uses in the first stage a second-order residual that is directly a filtered version of the stiffness multiplied by the deformation rate of the transmission. In the second stage, a simple regressor provides the transmission stiffness in a singularity-robust way. Numerical results reported for the cases of constant, nonlinear, or variable stiffness transmissions demonstrate the effectiveness of the approach and the relative merits of the two estimation strategies.