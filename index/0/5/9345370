Humanoid robots should be able to stand and walk in the presence of external disturbances. This paper addresses the robustness of a humanoid robot to unknown disturbances. Applying the maximal CPI set, it becomes possible to consider the physical constraint explicitly in the COG-ZMP inverted pendulum model control. In our previous research, the convergence speed of COG was improved by applying the switching control based on the maximal CPI set to the stabilization control assuming the contact region is constant. This paper presents updating calculation method of the maximal CPI set when the contact region changes, and the authors propose a falling avoidance control as an application of it. Detecting the stepping necessity based on the maximal CPI set enables to unify the upright position stabilization and stepping motion for falling avoidance. The validity of the proposed method is verified with experiments.