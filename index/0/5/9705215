In this paper, we solve the ancestry problem, which was introduced more than twenty years ago by Kannan et al. [STOC '88], and is among the most well-studied problems in the field of informative labeling schemes. Specifically, we construct an ancestry labeling scheme for n-node trees with label size log2 n + O(log log n) bits, thus matching the log2 n + Î©(log log n) bits lower bound given by Alstrup et al. [SODA '03]. Besides its optimal label size, our scheme assigns the labels in linear time, and guarantees that any ancestry query can be answered in constant time. In addition to its potential impact in terms of improving the performances of XML search engines, our ancestry scheme is also useful in the context of partially ordered sets. Specifically, for any fixed integer k, our scheme enables the construction of a universal poset of size O(nk log4k n) for the family of n-element posets with tree-dimension at most k. This bound is almost tight thanks to a lower bound of nk-o(1) due to Alon and Scheinerman [Order '88].