Real-time scheduling in systems with energy or power constraints is challenging. Especially when a mixture of real-time and best effort tasks exist, it is difficult to guarantee that all deadlines are met and at the same time that the system does not run out of energy. This is the case for industrial instrumentation for hazardous areas, such as explosive atmospheres. A frequently used method of protection against explosion is intrinsic safety. That means, the power supply as well as the energy that is stored in the device is kept below a critical threshold. As a result, energy is a much scarcer resource than processing time in this class of systems. Therefore, it is appropriate to base the scheduling decision on the available and the consumed energy instead of the processing time. In this work, we adapt the Earliest-Eligible-Virtual-Deadline-First algorithm (EEVDF) for energy-driven scheduling using dynamic power management. The resulting system is hard real-time capable, takes the energy consumption of peripherals and sensors into account and utilizes slack energy efficiently and predictably. Since the scheduler guarantees the availability of sufficient energy for real-time tasks, the design of the system is significantly simplified.