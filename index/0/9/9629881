Generating accurate environment representations can significantly improve the autonomy of mobile robots. In this article we present a novel probabilistic technique for solving the full SLAM problem by jointly solving the data registration problem and the accurate reconstruction of the underlying geometry. The key idea of this paper is to incorporate spatial correlation models as prior knowledge on the map we seek to construct. We formulate the mapping problem as a maximum a-posteriori estimation comprising common probabilistic motion and sensor models as well as two spatial correlation models to guide the optimization. Instead of discarding data at an early stage, our algorithm makes use of all data available in the optimization process. When applied to SLAM, our method generates maps that closely resemble the real environment. We compare our approach to state-of-the-art algorithms, using both real and synthetic data sets.