Heating, ventilation and cooling (HVAC) is the largest source of residential energy consumption. In this paper, we demonstrate how to use cheap and simple sensing technology to automatically sense occupancy and sleep patterns in a home, and how to use these patterns to save energy by automatically turning off the home's HVAC system. We call this approach the smart thermostat. We evaluate this approach by deploying sensors in 8 homes and comparing the expected energy usage of our algorithm against existing approaches. We demonstrate that our approach will achieve a 28% energy saving on average, at a cost of approximately $25 in sensors. In comparison, a commercially-available baseline approach that uses similar sensors saves only 6.8% energy on average, and actually increases energy consumption in 4 of the 8 households.