N-body simulation is a classic application in high-performance computing. Although compiler optimizations designed for other classics such as matrix multiplication and FFT were well developed, the ones designed for N-body problems have been little studied. Hand optimizations for N-body solvers are thus rampant. To remedy this complication, we design a domain-specific language (DSL) embedded in Python for describing N-body problems and develop a DSL compiler that exploits the symmetric nature of N-body problems. It brings efficient code comparably with hand-written code.