Quadrupedal locomotion can be described as a constrained optimization problem that is very hard to solve due to the high dimensional, nonlinear and non-smooth system dynamics. In this paper, we propose a formulation that can be solved within few seconds using sequential quadratic programming. This method considers only a simplified model that just sufficiently represents the system dynamics. The output is a very coarse plan, which can be accurately and robustly followed on a real system using hierarchical whole-body control combined with inverted pendulum-based reactive stepping. Using the fully torque controllable quadrupedal robot ANYmal, we present successful experiments for walking, trotting, and gait transitions even under substantial external disturbances.