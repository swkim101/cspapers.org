This paper presents a full-resolution reconfiguration algorithm for a heterogeneous modular robot composed of sliding cube modules with a limited motion primitive. We assume that a cube module is not allowed to make convex motions around other modules but is allowed to slide across other modules' surfaces. The availability of reconfiguration algorithm for such a module with limited mobility overcomes restrictions in the design of modular robots. To overcome the limited mobility of the assumed cube module, we introduce a method that compresses a robot with virtual walls and executes a reconfiguration and heterogeneous permutation of the robot structure in the compressed configuration. We prove the correctness and completeness of the proposed algorithm for three-dimensional connected structures. Simulation results show that the reconfiguration in free space is executed in quadratic operating time cost.