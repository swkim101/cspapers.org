In order to study quantum many-body problems, we develop two matrix diagonalization codes, which solve only the ground state and all quantum states, respectively. The target model in both codes is the Hubbard model with confinement potential which describes an atomic Fermi gas loaded on an optical lattice and partly High-Tc cuprate superconductor. For the former code, we obtain 18.692TFlops (57% of the peak) as the best performance on the Earth Simulator when calculating the ground state of 100-billion dimensional matrix. From these large-scale calculations, we find atomic-scale inhomogeneous superfluid state which is now a challenging subject for physicists. For the latter code, we succeed in solving the matrix whose dimension is 375,000 with locally 24.6TFlops (75% of the peak). The calculations reveal that a change from Schrodinger's cat to classical like one can be controlled by tuning the interaction. This is a marked contrast to the general concept.