Follow-the-leader based approaches have been popular for the control of multi-robot teams for their ability to drive many with few. Typically, in these methods you select a single leader, generate a plan for it, while all other agents follow this leader using their individual controllers. However, there are many scenarios where this approach can lead to highly suboptimal behavior or even failure in the presence of clutter. In this work, we present a planning approach that automatically figures out when to switch leaders on the way to the goal while minimizing a given cost function that penalizes leader switching and deviations from the desired formation. To deal with the increased dimensionality of the problem we show how a recently developed algorithm, MHA* (multi-heuristic A*) can be extended to support planning for a team of robots. We also provide explicit cost minimization and guarantee that paths found are within a user- chosen factor of optimality with respect to the graph modeling the planning problem. Experimentally, we found that allowing for dynamic leader-switching leads to a significant increase in finding feasible plans for multi-robot teams ranging up to 21 robots.