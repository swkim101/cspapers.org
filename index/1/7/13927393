Applications can be freely developed and installed into smartphones. Furthermore, smartphones can utilize various networks like private WiFi networks. Such openness of smartphones means that their traffic is uncontrollable for both carriers and users. This creates various problems such as network overloads and security risks that degrade user experience. To address the issue of uncontrollability, we propose STCoS, a software-defined, i.e., programmable, traffic control scheme for smartphones. STCoS is designed to work standalone basis in a smartphone for ease of deployment. It is also designed to have a layered architecture with a well-defined API for improved programmability. STCoS directs traffic of smartphone applications to the appropriate network interface, monitors the traffic, and filters the traffic as needed. It enables control logic to be implemented in the form of a smartphone application. The programmability facilitates real-time traffic control on a moment-to-moment basis. Thus STCoS recovers controllability on smartphone traffic with simple programming. Control logic implementation in example programs, such as a sophisticated WiFi offloading program, demonstrated that STCoS can be used to easily program traffic control. Implementation of STCoS in an Android smartphone demonstrated that the overhead of STCoS is low enough for practical use.