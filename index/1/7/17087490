Modular robots can potentially assemble into a wide range of configurations to locomote in different environments. However, designing locomotion strategies for each configuration is often tedious and has generally relied on a priori known connection geometry. Here we present a framework for 2D modular robots made of square modules assembled with arbitrary geometry, which achieve collective and directed locomotion with no centralized controller. Individual modules communicate locally and provably achieve consensus in coordinating movement in a common travel direction. In experiments with simulations and hardware prototypes, we show that robots achieve effective locomotion, irrespective of the number of modules and their connectivity which can be highly asymmetric.