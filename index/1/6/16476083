In this work, we discuss testing automation issues for kernel code on a high-capacity network-attached storage (NAS) in early development phases when the hardware may not be ready. We propose to construct a high-fidelity versatile emulator for hard disks for the fast configuration of virtual disk arrays. To test kernel libraries, we not only have to figure out the proper values for the kernel procedure parameters, but also have to overcome the rigid resource limitations in kernel space. We propose techniques to profile kernel procedure parameters, drive the kernel procedures from the user space, and construct the testing interface between kernel SUTs (software-under-test) and user space test plans. We have experimented to test the multiple devices driver library used in the NAS server by Quanta Computer Inc. Our techniques support rapid NAS configurations and have been proven useful in locating a proven bug in the Linux kernel