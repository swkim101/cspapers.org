Teams of robots can utilize formations to accomplish a task, such as maximizing the observability of an environment while maintaining connectivity. In a cluttered space, however, it might be necessary to automatically change formation to avoid obstacles. This work proposes a path planning approach for non-holonomic robots, where a team dynamically switches formations to reach a goal without collisions. The method introduces a multi-level graph, which can be constructed offline. Each level corresponds to a different formation and edges between levels allow for formation transitions. All edges satisfy curvature bounds and clearance requirements from obstacles. During the online phase, the method returns a path for a virtual leader, as well as the points along the path where the team should switch formations. Individual agents can compute their controls using kinematic formation controllers that operate in curvilinear coordinates. The approach guarantees that it is feasible for the agents to follow the trajectory returned. Simulations show that the online cost of the approach is small. The method returns solutions that maximize the maintenance of a desired formation while allowing the team to rearrange its configuration in the presence of obstacles.