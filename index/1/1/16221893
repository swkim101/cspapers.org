We demonstrate MacroLab, which is a macroprogramming framework that offers a vector programming abstraction similar to Matlab for cyber-physical systems (CPSs). The user writes a single program for an entire network using Matlab like operations such as addition, find, and max. The framework executes these operations across the network in a distributed fashion, a centralized fashion, or something between the two - whichever is most efficient for the target deployment. We call this approach deployment-specific code decomposition (DSCD). The MacroLab programming framework will facilitate the easy development of applications for CPSs by domain experts such as scientists and engineers with almost no additional overhead to the nodes in terms of message cost, power consumption, memory footprint, or CPU cycles over TinyOS programs.