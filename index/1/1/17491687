Using renewable energy in an efficient way is a key challenge facing our society. In this paper we study online mechanisms motivated by markets for such renewable energy, such as wind energy. While the aggregate demand of the large populations served by energy providers is quite predictable, supply in such systems is rather uncertain; e.g. it depends on the strength of the wind at the wind turbines. Energy, when it is available, must be delivered immediately, due to the inefficiency of technologies for electric power storage, hence the supply is perishable. We model this scenario with an online market where supply is unknown, but participants know their own demand, and bid for energy at the beginning of the period. Items arrive online and are perishable, meaning that they have to be allocated to bidders immediately after arrival. This setup have been used for modeling renewable energy markets by earlier works, such as Tan and Varaiya (1993). We perform a price-of-anarchy analysis for a simple greedy allocation scheme, and compare efficiency of equilibria and learning outcomes to the socially optimal offline allocation. Due to the uncertainty, traditional dominant-strategy truthfulness cannot be achieved except by trivial mechanisms, which makes simple allocation mechanisms, such as the greedy, an appealing alternative. We show that simple first-price or second-price auctions combined with a greedy allocation rule ensure that equilibria closely approximate the optimum, assuming that bidders' preferences are non-increasing over time and additive within their demand, and demand is captured by a cardinality or matroid constraint. The results are of interest not only due to the application to energy markets, but also as they provide the first successful bounds on the price of anarchy of mechanisms in any online setting, while for the classical sequential auction setting Paes Leme et al. (2012) show that the price of anarchy is prohibitively high even with very simple bidder utilities. In more detail, we prove that equilibria and learning outcomes ensure at least half of the optimal welfare in case of the first-price rule with cardinality constraints, matching the approximation bound for the greedy algorithm. For second-price and more general matroid constraints, we show weaker guarantees. All results also extend to the Bayesian setting, where player values are random: bidder know their own future demand, but the competition is uncertain as is the supply, and all values may be correlated.