This study proposes an online foot position compensator (FPC) for improving the robustness of biped walking. The proposed FPC learns foot placement parameters through sensory feedback and preview control theory to re-plan the trajectories of the center of mass (CoM) and gait pattern; the re-plan is based on the online generation of a walking pattern using the policy gradient reinforcement learning method (PGRL) to reject external perturbations and recover the walking position. A method of upper-body posture control is also presented to further improve the ability of humanoid robots to suppress external disturbances. The proposed posture controller stabilizes the robot by utilizing hip joints to modulate the upper-body posture in real time. The effectiveness of the proposed methods is validated by simulations on a full-body NAO humanoid robot.