Demand response is an important feature and functionality of the future smart grid. Electric vehicles are recognized as a particularly promising resource for demand response given their high charging demand and flexibility in demand management. Recently, researchers begun to apply market-based solutions to electric vehicle demand response. A clear vision, however, remains elusive because existing works overlook three key issues. (i) The hierarchy among electric vehicles (EVs), charging stations, and electric power companies (EPCs). Previous works assume direct interaction between EVs and EPCs and thus confine to single-level market designs. The designed mechanisms are inapplicable here due to ignoring the role of charging stations in the hierarchy. (ii) Temporal aspects of charging loads. Solely focusing on economic aspects makes significant demand reduction, but electric vehicles would end up with little allocated power due to overlooking their temporal constraints. (iii) Renewable generation co-located with charging stations. Market mechanisms that overlook the uncertainty of renewable would cause much inefficiency in terms of both the economic and temporal aspects. To address these issues, we study a new demand response scheme, i.e, hierarchical demand response for electric vehicles via charging stations. We propose that two-level marketing is suitable to this hierarchical scheme, and design a distributed market mechanism that is compatible with both the economic and temporal aspects of electric vehicle demand response. The market mechanism has a hierarchical decision-making structure by which the charging station leads the market and electric vehicles follow and respond to its actions. An appealing feature of the mechanism is the provable convergence to a unique equilibrium solution. At the equilibrium, neither the charging station or electric vehicles can improve their individual economic and/or temporal performance by changing their own strategies. Furthermore, we present a stochastic optimization based algorithm to optimize economic performance for the charging station at the equilibrium, given the predictions of the co-located renewable generation. The algorithm has provable robust performance guarantee in terms of the variance of the prediction errors. We finally evaluate the designed mechanism via detailed simulations. The results show the efficacy and validate the theoretical analysis for the mechanism.