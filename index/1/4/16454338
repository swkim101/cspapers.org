In this paper, we present a control architecture for fully automated warehouse operation. The scenario we are considering consists of several autonomous guided vehicles (AGVs), transporting packages from an input location to one of several destinations, through an unstructured warehouse environment. The AGVs are equipped with wheel encoders, laser range finders and RFID tag readers. Each package has a RFID tag encoding its destination. A map of the warehouse is provided a priori. We have developed a layered control architecture that enables fully autonomous system operation. Starting with a map of the environment, the control system generates feasible paths, assigns tasks to the vehicles and schedules task execution. At the lowest layer, waypoint tracking controllers enable task execution. The proposed architecture has been successfully tested in a simulated scenario at the IEEE Virtual Manufacturing Automation Competition (VMAC), using the USARSim simulator.