Color is commonly used to convey information in digital environments, but colors can be difficult to distinguish for many users -- either because of a congenital color vision deficiency (CVD), or because of situation-induced CVDs such as wearing colored glasses or working in sunlight. Tools intended to improve color differentiability (recoloring tools) exist, but these all use abstract models of only a few types of congenital CVD; if the user's color problems have a different cause, existing recolorers can perform poorly. We have developed a recoloring tool (SSMRecolor) based on the idea of situation-specific modeling -- in which we build a performance-based model of a particular user in their specific environment, and use that model to drive the recoloring process. SSMRecolor covers a much wider range of CVDs, including acquired and situational deficiencies. We evaluated SSMRecolor and two existing tools in a controlled study of people's color-matching performance in several environmental conditions. The study included participants with and without congenital CVD. Our results show both accuracy and response time in color-matching tasks were significantly better with SSMRecolor. This work demonstrates the value of a situation-specific approach to recoloring, and shows that this technique can substantially improve the usability of color displays for users of all types.