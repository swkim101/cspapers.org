In this paper, we propose a physically meaningful energy-related safety indicator for robots sharing their workspace with humans. Based on this indicator, a safety criterion accounting for the breaking capabilities of the robot is included as a quadratic constraint in the control algorithm. This constraint is modulated by the distance between the human operator and the end-effector of the robot. The control algorithm is formulated as an optimization problem and computes the actuation torque of a robotic manipulator given some task to be performed and physical constraints to respect. The overall framework is validated in a physics simulation software on a Kuka LWR4 and different behaviours of the robot towards a considered obstacle in its environment are evaluated and discussed.