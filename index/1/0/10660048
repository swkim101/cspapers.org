In this paper we describe how to extend CTADEL, a Problem Solving Environment, in order to generate code for a turbulence scheme, in our case, within a numerical weather prediction model (NWP). Common for these schemes is the presence of implicit equations. We describe how to generate efficient codes for a particular class of implicit differential equations, that is encountered in the turbulence scheme of the HIRLAM NWP model. This extension to CTADEL enables the code generation for a particular solution method for these implicit equations. This solution method is also used in the original hand-written (reference) code. We address problems like how to recognize the type of equations and how to generate efficient code for a prescribed solution method. Finally, we compare the generated code for the turbulence scheme with the hand-written reference code.