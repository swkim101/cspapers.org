An effective way for reducing CPU power consumption is to reduce its operating frequency. But this slows down program execution, which may violate the real-time requirements of video playback. What is worse, it is difficult to predict future decoding times, and unduly conservative policies may miss viable opportunities to reduce the CPU frequency. The effectiveness of such power-saving techniques is thus dependent on an ability to estimate future demands on the CPU. We present the design, implementation and evaluation of a dynamic voltage scaling (DVS) scheme for portable media players. We measured decoding times on real videos and extracted a precise relationship between frame size and decoding time using logarithmic regression. Based on this model, we propose a frequency selection algorithm which accepts some deadline misses, and selects the frequencies required to achieve a specified deadline miss ratio. We implemented this scheme in MPlayer running on the Linux 2.6. Experimental results show that its system-wide energy consumption is up to 17% less than conventional DVS schemes and up to 24% less than non-DVS schemes.