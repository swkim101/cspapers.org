This paper discusses a fully decentralized algorithm able to control the morphology of a modular robot, consisting of many identical modules, according to the environment encountered. One of the significant features of our approach is that we explicitly exploit "emergent phenomena" stemming from the interaction between control and mechanical dynamics in order to control the morphology in real time. To this end, we particularly focus on a "functional material" and a "mutual entrainment", the former of which is used as a connection mechanism between the modules, and the latter of which plays as the core of the control mechanism for the generation of locomotion. Simulation results indicate that the proposed algorithm can induce "protoplasmic streaming", which allows us to successfully control the morphology of modular robot in real time according to the situation without losing the coherence of the entire system.