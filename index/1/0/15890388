A method and a tool for simulation of a control system are presented. The tool allows integration of software components, electronics and mechanical devices into the same package and makes it possible to simulate the complete system accounting for all time-discretizations and physical delays in an accurate way. The software used for control of the virtual system is exactly the same as that used in the final product. The complete system can be prototyped in a virtual world, be tested and optimized long before a physical prototype is built.