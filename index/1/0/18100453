This paper presents an online methodology for imitating human walking motion of a humanoid robot in task and joint space simultaneously. Two aspects are essential for a successful walking imitation: stable footprints represented in task space and motion similarity represented in joint space. The human footprints are recognized from the captured motion data and imitated by the robot through conventional zero-moment point (ZMP) control scheme. Additionally we focus on similar knee joint trajectories for the motion similarity, which are related to knee stretching and swing leg motion. The inverse kinematics suffers from three problems: knee singularity, strongly conflicting tasks and underactuation. We formulate this problem as a quadratic programming (QP) with dynamic equality and inequality constraints. The discontinuity of dynamic task switching is solved by introducing an activation buffer, resulting in a cascaded QP form. Finally we evaluate the effectiveness of the proposed approach on the DLR humanoid robot TORO.