This paper presents a log-based algorithm for recovering the state of database application programs after system crashes. AIthough the general idea of the algorithm is quite simple, the interaction between the program, the user, and the database management system has to be investigated with care. To describe the details of the algorithm clearly, we introduce a programming language with terminal input/output and database operations. By incrementally changing the semantic definition of the programming language to include operations for logging and recovery purposes, we demonstrate that the requirements for crash recovery can be met without changing the database application programs themselves.