This paper describes an efficient dynamic simulation of a humanoid robot. In the simulation, an order n formulation is used to solve the inverse dynamics and forward dynamics of a multi-body system. The formulation can deal with a tree structure and multiple contacts with the environment. In order to simulate a collision with friction between the foot and a floor, a virtual spring-damper contact model is proposed. By introducing this model, computation of contact becomes easier and faster compared with other method such as plastic contact. A simulation of ascending steep stairs is carried out in order to demonstrate the validity of the simulation. The results of the simulation are presented and discussed.