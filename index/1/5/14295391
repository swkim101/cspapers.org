We propose a formal framework for modelling case-based inference (CBI), which is a crucial part of the case-based reasoning (CBR) methodology. As a representation of the similarity structure of a system, the concept of a similarity profile is introduced. This concept makes it possible to formalize the CBR hypothesis that "similar problems have similar solutions" and to realize CBI in the form of constraint-based inference. In order to exploit the similarity structure more efficiently, a probabilistic generalization of the constraintbased view is developed. This formalization allows for realizing CBI in the context of probabilistic reasoning and statistical inference and, hence, makes a powerful methodological framework accessible to CBR. Within the generalized setting, a (formalized) CBR hypothesis corresponds to the assumption of a certain stochastic model, and a memory of cases can be seen as statistical data underlying the inference process. As a particular result we establish an approximate probabilistic reasoning scheme which generalizes the constraint-based approach.