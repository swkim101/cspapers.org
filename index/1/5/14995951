This paper considers alternative directory protocols for providing cache coherence in shared-memory multiprocessors with 32 to 128 processors, where the state requirements of <italic>Dir<subscrpt>N</subscrpt></italic> may be considered too large. We consider <italic>Dir<subscrpt>i</subscrpt></italic>B, <italic>i</italic>=1,2,4, <italic>Dir<subscrpt>N</subscrpt>, Tristate</italic> (also called <italic>superset</italic>), <italic>Coarse Vector</italic>, and three new protocols. The new protocols—<italic>Gray-hardward, Gray-software, Home</italic>—are optimizations of <italic>Tristate</italic> that use gray coding to favor near-neighbor sharing.
Our results are the first to compare all these protocols with complete applications (and the first evaluation of  <italic>Tristate</italic> with a non-synthetic workload). Results for three applications—ocean (one-dimensional sharing), appbt (three-dimensional sharing), and barnes (dynamic sharing)—for 128 processors on the Wisconsin Wind Tunnel show that (a)<italic>Dir<subscrpt>i</subscrpt></italic> B sends 15 to 43 times as many invalidation messages as <italic>Dir<subscrpt>N</subscrpt></italic>, (b) <italic>Gray-software</italic> sends 1.0 to 4.7 times as many messages as <italic>Dir<subscrpt>N</subscrpt></italic>, making it better than <italic>Tristate, Gray-hardware,</italic> and <italic>Home</italic>, and (c) the choice between <italic>Dir<subscrpt>i</subscrpt></italic>B, <italic>Coarse Vector</italic>, and <italic>Gray-software</italic>  depends on whether one wants to optimize for few sharers (<italic>Dir<subscrpt>i</subscrpt></italic>B), many sharers (<italic>Coarse Vector</italic>), or hedge one's bets betweem both alternatives (<italic>Gray-software</italic>).