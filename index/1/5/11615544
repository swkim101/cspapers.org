In this paper we study a dynamic problem of ridesharing and taxi sharing with time windows. We consider a scenario where people needing a taxi or interested in getting a ride use a phone app to designate their source and destination points in a city, as well others restrictions (such as maximum allowable time to be at the destination). On the other hand, we have taxis and people interested in giving a ride, with their current positions and also some constraints (vehicle capacity, destination, maximum time to destination). We want to maximize the number of shared trips: in the case of taxis, people going to close locations can share the costs of the trip, and in case of rides, the driver and passengers can share costs as well. This problem is dynamic since new calls for taxis or calls for rides arrive on demand. This gives rise to an optimization problem which we prove to be NP-Hard. We then propose heuristics to deal with it. We focus on the taxi sharing problem, but we show that our model is easily extendable to model the ridesharing situation or even a situation where there are both taxis and car owners. In addition, we present a framework that consists basically of a client application and a server. The last one processes all incoming information in order to match vehicles to passengers requests. The entire system can be used by taxi companies and riders in a way to reduce the traffic in the cities and to reduce the emission of greenhouse gases.