Evolutionary testing (ET), automatically generating test data with good quality, is an effective technique based on evolutionary algorithm. However, the presence of flag variables will make it degenerate to random testing in structural testing. Much of previous work has addressed this problem, but all can be characterized as program-specific. In this paper, flag cost function is introduced as the main component of fitness function, whose value changes with the variation of flag problem. Based on this, a unified fitness calculation rule for flag conditions is proposed. The experiments on programs with flag problems, once considered as inextricable in previous work, and the Traffic Alert and Collision Avoidance System (TCAS) code showed the effectiveness of our unified approach.