Series-elastic and viscoelastic robots can provide performance gains in applications with high dynamics. Harnessing these, requires an understanding of the dynamics of the system, which can be gained using optimization-based methods. The result are motions which make optimal use of the intrinsic behavior, possibly exceeding the performance of an equivalent rigid-body robot. We present a collocation framework which enables both automatic computation of contact-switching patterns and allows the full utilization of the dynamics of the compliant system. The formulation also addresses the problem of redundant torque generation in viscoelastic actuators. The effectiveness of this method was demonstrated in simulations as well as experiments with a compliant bipedal robot. The approach is capable of providing gait primitives, longer gait sequences containing multiple steps as well as generating extremely dynamic motions, e.g. somersaults.