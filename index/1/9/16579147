A performance monitoring framework for adaptive instrumentation and diagnosis is presented. Instrumentation is performed by low-overhead monitoring probes which are automatically activated and deactivated based on runtime conditions. Both a collaborative distributed model and a centralised model for assisting the diagnosis and adaptation processes are presented. The framework targets component-based systems in general and J2EE in particular.