Collision-free walking in cluttered environments is still an open issue for humanoids. Most current approaches use heuristics with large safety margins to plan the robot's motion. That way, the chance of collisions can be greatly reduced but the robot movements are artificially limited. In this context, we extend our framework for motion generation and whole-body collision-avoidance by an on-line predictive kinematic parameter evaluation and optimization: we propose to evaluate the parameter set describing the walking pattern by integrating the full kinematic model of the robot. Initial parameter sets, which are kinematically infeasible due to kinematic limits or collisions, can be identified and adapted before the motion is executed. Starting with a feasible solution, the parameter set is optimized using a gradient method. Since the method is applied before each step, while the robot is executing the previous step, it is very reactive to changes in the environment or in the user input. The optimization method is not limited to a specific walking pattern representation, but it is applicable to different representations. We want to emphasize its suitability for real-time control. The optimization can be stopped if it exceeds a predetermined time budget. In that case, an executable but suboptimal result is used. The method is presented with simulation results obtained with our multi-body simulation. We have also validated the real-time performance in experiments with our humanoid Lola.