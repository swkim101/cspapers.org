Network coding is seen as a promising technique to improve network throughput. In this paper, we study two important problems in localized network coding in wireless networks, which only requires each node to know about and coordinate with one-hop neighbors. In particular, we first establish a condition that is both necessary and sufficient for useful coding to be possible. We show this condition is much weaker than expected, and hence allows a variety of coding schemes to suit different network conditions and application preferences. Based on the understanding we establish, we are able to design a robust coding technique called loop coding that can improve network throughput and TCP throughput simultaneously.