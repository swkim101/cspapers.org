Motion planning is one of the key capabilities for autonomous humanoid robots. Previous researches have focused on weight balancing, collision detection, and gait generation. Most planners either assume that the environment can be simplified to a 2D workspace or assume that the path is given. In this paper, we propose a motion planning system capable of generating both global and local motions for a humanoid robot in a layered or two and half dimensional environment. The planner can generate a gross motion that moves the humanoid vertically as well as horizontally to avoid obstacles in the environments. The gross motion is further realized by a local planner that determines the most efficient footsteps and locomotion over uneven terrain. If the local planner fails, the failure is feedback to the global planner to consider other alternative paths. The implemented humanoid planning system is an interactive tool that can compute collision-free motions for a humanoid robot in an online manner.