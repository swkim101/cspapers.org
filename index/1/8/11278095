The integration of wireless sensors with mobile phones is gaining momentum as an enabling platform for numerous emerging applications. These mobile systems face dynamic environments where both application requirements and ambient wireless conditions change frequently. Despite the existence of many MAC protocols, none can provide optimal characteristics along multiple dimensions, especially when the conditions are frequently changing. Instead of pursuing a one-MAC-fit-all approach we present the Self-Adapting MAC Layer (SAML) that dynamically selects and switches MAC protocols to gain the desired characteristics in response to changes in ambient conditions and application requirements. SAML comprises (1) a Reconfigurable MAC Architecture (RMA) that can switch to different MAC protocols at run time and (2) a learning-based MAC Selection Engine that selects the protocol most suitable for the current condition and requirements. To the application SAML appears as a traditional MAC layer and realizes its benefits through a simple API for the mobile applications. We have implemented SAML in TinyOS 2.x and built three prototypes containing up to five MACs. We evaluate the system in controlled tests and real-world environments using a new gateway device that integrates a 802.15.4 radio with Android phones. Our experimental results show that SAML can effectively adapt MAC layer behavior to meet varying application requirements in dynamic environments through judicious selection and efficient switching of MAC protocols.