In wireless sensor networks, NLOS propagation often enlarges the errors of position estimates when time-of-arrival (TOA) measurements are used. To mitigate the effects caused by NLOS propagation, herein, an EKF-based robust non-parametric approach is proposed. In this paper, we utilize the variable kernel method to obtain an approximate noise density function, which is inexpensively computational and then used to improve the mobile positioning accuracy. Note that the standard EKF often works well when NLOS error is adequately low. This property could also be used to improve the accuracy of mobile positioning. In the proposed algorithm, a hard decision is employed to choose the rational position estimate which may come from the non-parametric approach or the standard EKF. Numerical simulations show a significant improvement over the standard EKF.