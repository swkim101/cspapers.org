As an effective platform for networking attacking, the botnet brings the most serious threats. In this paper, botnets are categorized into three classes based on network structure. They are centralized botnet, distributed (P2P) bornet and hybrid botnet. This paper divides botnet defense techniques into three fields: detection, measurement and restraint. It analyzes each field in detail, and discusses that which defense technique is suitable for what kind of botnet.