In this paper, we analyze the principles of the dark channel prior based on guided filtering image algorithm to defog, pointing out the shortcomings and derive an improved method. Dark channel prior principle is established in the absence of bright areas, which not satisfied Dark channel prior, and thus, the transmittance of the bright areas is estimated error, which will case color distortion of defogged image. By introducing a tolerancemechanism refining the transmittance, the algorithm can effectively handle such problem to overcome the color distortion in bright areas using dark channel prior. Experimental results show that this modification is substantial practicable to restore image, at the same time eliminates the color distortion, significantly improve the visual effect.