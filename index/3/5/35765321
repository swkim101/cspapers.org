We present a humanoid walking control system that generates body trajectories to follow a given desired motion online. A layered software and control architecture is used to aggregate system components and provide a framework for high-level autonomous locomotion behaviors. Walking characteristics such as desired torso movements, upper body posture and step cycles, can be specified and used to generate stable whole-body walking trajectories online. The basic architecture consists of 4 layers: footstep planning, trajectory generation, trajectory modification from sensor feedback, and joint servo control. In order to test the complete system, we implemented an experimental top-level behavior that enables the robot to track and follow a moving target based on stereo vision feedback. We explain the overall system design and components, and present results based on our current implementation using the humanoid robot 'H7'.