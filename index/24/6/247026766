We investigate the impact of allowing students to optionally work in small groups on problem sets in first- and second-year computer science theory courses. After each homework assignment, students reported on their experience working on that problem set either individually or in a group of two or three. Over 1,300 students from two courses participated. We explore who chooses to work in a group and why, how students work in groups, and differences in learning, drop-rates, help-seeking, and satisfaction with problem set submissions between groups and students working individually. Students reported that workload and problem set marks were key factors for choosing to work in groups. Students in groups were less likely to drop the course, less likely to seek help from unsanctioned sources, less likely to leave problems unanswered, and more satisfied with their submissions. Students working in groups had much higher average grades for problem sets and similar grades on tests. On individual tests, we observed lower grades for students who reported either doing less than their fair share overall or allowing their partner to do most of the work on particular questions. Final course grades were higher for students who worked in groups, even when controlling for prerequisite grades.