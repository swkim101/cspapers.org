Recent innovations in energy harvesting promise extended operational life and reduced maintenance costs for the next generation of Internet of Things (IoT) platforms. However, energy management in these platforms remains problematic due to dynamism in energy supply and demand, inefficiency in storing and converting energy and a lack of per-task charge isolation. This paper tackles this problem by proposing a software defined charge storage module called Morphy, which combines a polymorphic capacitor array with intelligent power management software. Morphy delivers energy to application tasks in a flexible, efficient, and isolated manner. Morphy provides two software extensions to the Operating System scheduler: the energy semaphore blocks the execution of tasks until sufficient charge is available to safely run them, and the energy watchdog monitors and mitigates energy management bugs. We have realized a prototype of Morphy with the hardware form factor of a standard 9V (PP3) battery package and a software library that integrates with the FreeRTOS scheduler. Our evaluation shows that, in comparison to standard energy storage and management approaches, our prototype reaches an operational voltage more quickly, sustains operation longer in the case of power failure and effectively isolates charge storage for dedicated tasks with minimal compute, memory and energy overhead.