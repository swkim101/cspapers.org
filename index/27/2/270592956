The developments reported in this paper are devoted to the dynamic scheduling of rail transport systems. In this context, our study focuses on implementing an algorithm for solving railway planning with predictable or unexpected demands. The system modeling process uses P-time stochastic Petri nets. In order to improve the efficiency and punctuality of rail transport. A method for minimizing disruptions by managing maintenance is proposed. The paper's contribution is a scheduling algorithm that prioritizes maintenance tasks according to a dynamic criticality. This dynamic criterion incorporates real-time information provided by a supervisory rail system layer (a SCADA system). The STPN is used for modeling system operation. It supplies a mathematical framework for disturbance detection and prognosis. The presented work constitutes a first step towards adapting the digital twin concepts for the maintenance of weakly instrumented railway infrastructures.