This paper presents a method of solving planning problems that involve actions whose effects change according to the situations in which they are performed. The approach is an extension of the conventional planning methodology in which plans are constructed iteratively by scanning for goals that are not yet satisfied, inserting actions to achieve them, and introducing additional sub-goals to be achieved. The necessary extensions to this methodology to handle context-dependent effects are presented from a general, mathematically rigorous standpoint.