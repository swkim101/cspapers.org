This paper studies a reconfiguration algorithm for heterogeneous cubic modular robots in environments with obstacles. Tunneling is suitable for the transformation of cubic modular robots in such an environment because a tunneling robot only passes spaces that are occupied by the robot in the start and goal configurations. We have also designed a permutation algorithm that can be executed in the space used by the tunneling robot. Considering the application in environments with obstacles, we assumed a motion primitive with only sliding motion along another module's surface. This differs from the previously studied one, which allows convex motions. The proposed algorithm uses a three-dimensional 2 × 2 × 2 meta-module to guarantee the existence of mobile modules and maintain the connectivity of the robot structure during the tunneling and permutation processes. We show that the algorithm is complete for a connected robot structure with more than one meta-module and that the reconfiguration in an environment with obstacles is executed in quadratic operating time cost.