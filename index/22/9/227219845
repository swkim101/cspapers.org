The development of renewable energies in the world continues to increase due to the growing demand for energy in emerging and developing economies. Encouraging, the tertiary sector and manufacturers constantly to use them. However, the injection of these energies into the electrical networks is a source of problems due to the instability of the renewable energies production, this generates serious penalties. One of the solutions to this production instability is the use of storage systems, moreover the fight against CO2 is a primordial challenge of our time. It is recommended to set up a clean storage system like that of the hydrogen produced by the electrolysis of water called Proton Exchange Membrane (PEM). On the other hand, implementation of this technique must provide an economic investment for the system. In this work, we describe the modeling and simulation of a photovoltaic system producing hydrogen by electrolysis of water (PEM), intended to supply the electrical and thermal loads of a building, where thermal energy is supplied by a solar thermal collector. The stored hydrogen is used to recharge fuel cells to maintain energy production in the network or for self-consumption. Knowing that the heating energy consumption is important. In this study we aim to improve energy efficiency through cogeneration on the thermal contribution of a building by using a system of heat recovery by electrolysis of water to heat a floor for example and thus reduce the energy bills and therefore implicitly the cost of PEM storage. The Analysis and simulation results using MATLAB/Simulink confirm the effectiveness and performances of the proposed technique.