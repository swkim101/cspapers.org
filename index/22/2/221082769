Most real-world tasks are compound tasks that consist of multiple simpler sub-tasks. The main challenge of learning compound tasks is that we have no explicit supervision to learn the hierarchical structure of compound tasks. To address this challenge, previous imitation learning meth-ods exploit task-speciﬁc knowledge, e.g., labeling demonstrations manually or specifying termination conditions for each sub-task. However, the need for task-speciﬁc knowledge makes it difﬁ-cult to scale imitation learning to real-world tasks. In this paper, we propose an imitation learning method that can learn compound tasks without task-speciﬁc knowledge. The key idea behind our method is to leverage a self-supervised learning framework to learn the hierarchical structure of compound tasks. Our work also proposes a task-agnostic regularization technique to prevent unstable switching between sub-tasks, which has been a common degenerate case in previous works. We evaluate our method against several baselines on compound tasks. The results show that our method achieves state-of-the-art performance on compound tasks, outperforming prior imitation learning methods.