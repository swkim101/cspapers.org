Matchmaking is a core problem for the e-sports and online games, which determines the player satisfaction and further influences the life cycle of the gaming products. Most of matchmaking systems take the form of grouping the queuing players into two opposing teams by following certain rules. The design and implementation of matchmaking systems are usually product-specific and labor-intensive. This paper proposes a two-stage data-driven matchmaking framework (namely OptMatch), which is applicable to most of gaming products and has the minimal product knowledge required. OptMatch contains an offline learning stage and an online planning stage. The offline learning stage includes (1) relationship mining modules to learn the low-dimensional representations of individuals by capturing the high-order inter-personal interactions, and (2) a neural network to incorporate the team-up effect and predict the match outcomes. The online planning stage optimizes the gross player utilities (i.e., satisfaction) during the matchmaking process, by leveraging the learned representations and predictive model. Quantitative evaluations on four real-world datasets and an online experiment on Fever Basketball game are conducted to empirically demonstrate the effectiveness of OptMatch.