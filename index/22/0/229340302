Rapid performance recovery from unforeseen environmental perturbations remains a grand challenge in swarm robotics. To solve this challenge, we investigate a behaviour adaptation approach, where one searches an archive of controllers for potential recovery solutions. We propose two algorithms: (i) Swarm Map-based Optimisation (SMBO), which selects and evaluates one controller at a time, for a homogeneous swarm, in a centralised fashion; and (ii) Swarm Map-based Optimisation Decentralised (SMBO-Dec), which performs an asynchronous batch-based Bayesian optimisation to simultaneously explore different controllers for groups of robots in the swarm. A simulation study investigates adaptation of a Thymio robot swarm in a collective foraging task. First, we investigate different groups of sensory-motor disturbances, including fault to proximity sensors, ground sensors, or actuators of individual robots, with 100 unique combinations for each type. Second, we investigate changes to the surrounding environment of the swarm, where the number of available resources drops or where one robot disrupts the rest of the swarm; for each such change, we include 30 unique conditions. The viability of SMBO and SMBO-Dec is demonstrated, comparing favourably to variants of random search and gradient descent, and various ablations, and improving performance up to 80% compared to the performance at the time of fault injection within less than 30 evaluations.