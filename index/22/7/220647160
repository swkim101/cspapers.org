In this article, we propose novel structural nested models to estimate causal effects of continuous treatments based on mobile health data. To find the treatment regime that optimizes the expected short-term outcomes for patients, we define a weighted lag-K advantage as the value function. The optimal treatment regime is then defined to be the one that maximizes the value function. Our method imposes minimal assumptions on the data generating process. Statistical inference is provided for the estimated parameters. Simulation studies and an application to the Ohio type 1 diabetes dataset show that our method could provide meaningful insights for dose suggestions with mobile health data.