This paper describes the xID architecture for plug-n-play smart cards. We focus on the software flexibility of this architecture in achieving a desired blend of security as well as performance to suite specific application requirements. The differences between xID and other conventional smart card frameworks are explained. We present the main building blocks of xID and show how various tasks can be divided among these blocks to deliver functional smart card based solutions. The division of tasks is explained in detail using the TLS library as an example. This enables the smart card to function both as a web server and a web client. The TLS layer consists of a server-side component, a client-side component and X.509 certificate parser. All these components can be designed in a flexible way to suite a particular set of security, performance and deployment needs.