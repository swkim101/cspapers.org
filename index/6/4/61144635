Distributed denial of service attack has become one of the most serious security threats in the network. This paper researched distributed denial of service under IPv6 network, improved the deterministic packet marking algorithm that existed in IPv4 network and applied it to IPv6 network. Detection of abnormal flow in the network can make the basic deterministic packet marking algorithm improved. Theoretical analysis and experiment show that the algorithm is effectively to packet marking in the IPv6 network and reduce the resource consumption of network and router.