Agents who operate in complex environments must often construct plans on the basis of incomplete knowledge. In such situations, the successful agent must incorporate into his plans actions which obtain information. These plans are intrinsically sketchy to begin with and become more specified as the agent proceeds through his plan. A theory which allows for such flexible planning will have to provide solutions to two problems: (1) how can an agent reason that he knows how to perform an action? (Knowledge Preconditions Problem for Actions) and (2) if an agent must construct an underspecified plan due to incomplete knowledge, when can we say that he can successfully execute his plan? (Knowledge Preconditions Problem for Plans). 
 
This paper provides solutions to both these problems. We develop a robust and highly expressive theory of action and planning which allows for actions of varying granularity, primitive as well as complex acts, multi-agent plans, and partially specified plans. We demonstrate that this theory lends itself in a natural manner to solutions to the Knowledge Preconditions Problems.