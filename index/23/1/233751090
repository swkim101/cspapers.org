In this paper, we introduce a consumer choice model in which each consumer's utility is affected by the purchase probabilities of his/her neighbors in a network. Such a consumer choice model is a general model to characterize consumer choice under network effect. We first characterize the choice probabilities under such a choice model. Then we consider the associated personalized assortment optimization problem. Particularly, the seller is allowed to offer a personalized assortment to each consumer, and the consumer chooses among the products according to the proposed choice model. We show that the problem is NP-hard even if the consumers form a star network. Despite of the complexity of the problem, we show that if the consumers form a star network, then the optimal assortment to the central consumer cannot be strictly larger than that without network effects; and the optimal assortment to each peripheral consumer must be a revenue-ordered assortment that is a subset of the optimal assortment without network effect. We also present a condition when revenue-ordered assortments can achieve a provable performance. Then in view of the fact that each node in a network can represent a group of consumers, we propose a novel idea in which the sellers are allowed to offer "randomized assortments" to each node in the network. We show that allowing for randomized assortments may further increase the revenue, and under a mild condition, the optimal assortment for the central consumer must be a combination of two adjacent revenue-ordered assortments and thus efficient algorithm can be developed. Finally, we extend the results to directed acyclic graphs (DAGs), showing that a mixture of adjacent revenue-ordered assortments is optimal under certain conditions.