In this paper, we present a highly efficient Divergent Component of Motion (DCM) reference trajectory generator capable of adapting online to large perturbations acting on the center-of-mass (push recovery) and on the swing foot (stumble recovery). For push recovery, we propose an analytic solution for a footstep adjustment strategy based on the DCM dynamics. The proposed algorithm considers double support phases explicitly and is active throughout the motion, i.e., during both single and double support phases. For stumble recovery, we introduce a continuous DCM trajectory adaptation based on the instantaneous tracking error of the swing foot. Our method is highly efficient, computing a push recovery solution within 10 microseconds on the robot hardware. Furthermore, it achieves robust locomotion for large external perturbations, which we demonstrate in simulations and experiments with the humanoid robot TORO.