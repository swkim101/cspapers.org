We consider an M/M/1 queue in a semi-Markovian environment. The environment is modeled by a two-state semi-Markov process with arbitrary sojourn time distributions <i>F</i><inf>0</inf>(<i>x</i>) and <i>F</i><inf>1</inf>(<i>x</i>). When in state <i>i</i> = 0, 1, customers are generated according to a Poisson process with intensity &lambda;<inf><i>i</i></inf> and customers are served according to an exponential distribution with rate &mu;<inf><i>i</i></inf>. Using the theory of Riemann-Hilbert boundary value problems we compute the <i>z</i>-transform of the queue-length distribution when either <i>F</i><inf>0</inf>(<i>x</i>) or <i>F</i><inf>1</inf>(<i>x</i>) has a rational Laplace-Stieltjes transform and the other may be a general --- possibly heavy-tailed --- distribution. The arrival process can be used to model bursty traffic and/or traffic exhibiting long-range dependence, a situation which is commonly encountered in networking. The closed-form results lend themselves for numerical evaluation of performance measures, in particular the mean queue-length.