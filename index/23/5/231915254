Recently, approximate nearest neighbor(ANN) search has achieved great success in quantization models due to its high search performance, strong expression ability, and small memory space. However, most existing quantization methods are batch-based models, such as product quantization and optimized product quantization, they are not suitable for processing data with a streaming style, and an existing online product quantization model can not decompose the space optimally. To address this problem, we propose an online optimized product quantization(online OPQ) model. This model can dynamically update the quantization codebooks and the rotation matrix. To track the movement of quantization codewords, we design a strategy for the model to update the orthonormal matrix. Furthermore, we derive the distortion bound to measure the difference of codebooks learned by our online model and OPQ method. The experiments demonstrate that our online OPQ model is efficient for ANN search compared with baseline models and that the method of tracking sub-codebooks further improves the performance.