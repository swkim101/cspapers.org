In this work, we consider the problem of allocating tasks and planning paths for multiple robots to operate cooper-atively. We formulate the problem as a bi-level optimization that involves optimizing the scheduling of robots and the collision-free path for each robot. To address the complexity of the environment with obstacles, we introduce a congestion-aware state representation technique with the aid of graph neural networks. We also derive a joint scheduling policy using multi-agent reinforcement learning, and we propose an additional auxiliary loss that promotes coordination among the robots. Through empirical evaluation, we demonstrate the effectiveness of our approach in solving the combined task allocation and path planning problem in a cooperative multi-robot system.