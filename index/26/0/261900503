With the advance of technology nodes, via fabrication in a dense design becomes a difficult challenge, and the directed self-assembly (DSA) technology has shown its great potential in contact/via layer manufacturing. As many studies consider the guiding template design problem for cylindrical DSA, lamellar DSA with the self-aligned via process emerges as an alternative with better yield and design flexibility. However, the new process also imposes new constraints on template design, making an arbitrary contact/via layout suffer from unsatisfactory manufacturability. In this paper, we present the first work on detailed routing considering lamellar DSA guiding template design and mask assignment with double patterning lithography (DPL) to minimize the numbers of unmanufacturable vias and short templates. In the proposed router, we construct a conflict graph and a via forbidden map for routing guidance and via mask assignment. A prerouting methodology is developed to obtain better via distribution in critical areas and preserve routing space for further detailed routing. After that, a short template-aware detailed routing approach routes the rest of the nets and an existing template design engine is adopted for optimal template design and mask assignment. The experimental results indicate that compared to a conventional A* search-based router, our approach can generate conflict-free template design results and achieve 35% reduction in short templates.