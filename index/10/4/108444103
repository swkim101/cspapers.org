In order to restore degraded image quality under foggy conditions, this paper proposes an improved defogging algorithm based on dark color knowledge in color space. According to the scene depth relationship between objects in a foggy image, the algorithm can repair the dark color figure, in which the grey scale line distance is used to judge edges, the most similar point of dark colors is selected as new value of dark value based on the character of the adjacent dark color, and the dark color image is used to obtain atmospheric light value automatically. Finally, the defogging purposes have been achieved based on the inverse process of the model. Experimental results show that improved algorithm effectively improves the visual effect of fog-degraded images.