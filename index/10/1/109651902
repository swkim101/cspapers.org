The paper applied the ultrasonic ranging technology into the pipeline obstacle detection system. First, the article uses square waves as driver signal and the threshold detection method to estimate the distance, then replace the square wave with m-sequence because of the unsatisfactorily test results. In order to improve the accuracy of measurement, four coding and three modulation modes are combined. Taking the impulse signal as a carrier wave, construct incentive sequence and detect the obstacles, analyze the results and find out the optimal combination. Finally the reason caused the error is discussed.