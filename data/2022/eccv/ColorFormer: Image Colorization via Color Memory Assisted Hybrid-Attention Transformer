We list the detailed architecture of our ColorFormer in Table 1, where an input image size of 256 × 256 is assumed. For Stage1 to Stage4, “Concat n × n” indicates a concatenation of n × n neighboring features in a patch. This operation results in a downsampling of the feature map by a rate of n. “96-d” denotes a linear layer with an output dimension of 96. “win. sz. 7 × 7” indicates a multi-head self-attention module with window size of 7 × 7. “[ ]×2” means a GLH-Transformer block consisting of a GL-MSA and a SW-MSA. For Stage5 to Stage7, we merge features from corresponding encoder stage and upscale feature map with PixelShuffle operations. Stage8 is our proposed Color Memory module, which stores color priors to enhance features. Stage9 is used to refine features and generate ab maps.