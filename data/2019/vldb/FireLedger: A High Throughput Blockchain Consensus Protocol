In recent years, blockchain has developed rapidly and achieved great success in a variety of industries. However, the current shortcomings of blockchain in terms of low throughput and slow transaction confirmation have led to the difficulty of implementing and using blockchain in some highly concurrent scenarios. In this regard, blockchain technology based on DAG was born. DAG is characterized by high concurrency and high throughput due to its unique data structure, and its combination with blockchain can break the blockchain throughput bottleneck. In this regard, a DAG-based blockchain consensus algorithm is proposed to fully order all blocks, provide the total order and effectively improve the throughput of the blockchain using the division of subgraphs. The new proposed consensus algorithm is experimentally demonstrated to have significant improvement in data throughput, and it is found that SgDAG has 79 times higher throughput than Bitcoin, 36.9 times higher than Ethereum, and 5.5 times higher than IOTA, with high throughput and can use smart contracts