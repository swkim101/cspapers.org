In this paper, we propose a new algorithm that derives lane marking maps from crowdsourced data. We process the data in four steps: (i) We make use of a point landmark map and, if available, an existent lane marking map for trajectory optimization and alignment, (ii) use a custom DBSCAN variant to cluster observations that belong to the same lane marking, (iii) apply a novel graph fitting approach to extract lane marking dashes, lines and even complex structures such as splits and merges and (iv) optimize the graph geometry with domain knowledge. The process of point-landmark- and lane marking-based trajectory alignment and the lane marking derivation is repeated iteratively to improve the results. Evaluation is carried out on a 9km highway section by comparison with high accuracy aerial photographs and manually labeled ground truth lane markings.