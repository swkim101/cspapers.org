The whole system was implemented using Tensorflow [1]. When minimizing Eq. 5 in the RDVO module, we used the 3D representation described as in the last line of Eq. 6. When calculating the rigid-aware flow consistency loss term in Eq. 9, the 2D representation in the first line of Eq. 6 was adopted. In the first stage of training, the smoothness loss of optical flow was applied across the entire image, i.e. Lfs = Ls(Ft→s, 1, 2). In the third stage of training, the smoothness loss of optical flow was only applied on the moving region, i.e. Lfs = Ls(Ft→s, 1−Mt, 2)